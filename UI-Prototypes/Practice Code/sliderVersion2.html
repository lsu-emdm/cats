<!doctype html>
<html>
<head>
    <title>NexusUI Demo</title>
    <script type= "text/javascript "src = "beat_times1.js"></script>
    <!--<script type= "text/javascript "src = "require-command.js"></script>
    <script type="text/javascript" src="../dist/nexusUI.js"></script>
    <script type= "text/javascript "src = "stringToIntegers.js"></script>

    <script>
        /*var requirejs = require('requirejs');
        var beatInformation = require('./stringToIntegers.js');
        var fs = require('./fs');
        var rs = fs.createReadStream('beat_times.csv', {encoding: 'utf8'})
        var ws = fs.createWriteStream('output.csv');


        // get data from line 1 to 3
        var getLine1 = getLine({lines: [1, 3], encoding: 'utf8', newline: '\n'}, cb);

        //var beats;
        function cb(line) {
            var beats = line;
            console.log(beats);
            var newBeats = beats.toString().split("\r\n");
            var betterBeats = newBeats.toString().split(",").map(Number);

            console.log(newBeats);
            console.log(betterBeats);


            //return beats;
            //console.log(newBeats[0]);

            beat1 = betterBeats[0];
            //beat2 = beats[1];
            //beat3 = beats[2];

            changeBeat(beat1);
            //changeBeat(beat2);
            //changeBeat(beat3);
            // return an array(which is "line") of the data in the range
            //need to be able to send each index to a certain slider

        }

        var finalBeat;
        //var finalBeat1;
        //var finalBeat2;

        function changeBeat(){
            finalBeat = beat1;
            //finalBeat1 = beat2;
            //finalBeat2 = beat3;
            console.log(finalBeat);

            //nx.onload(finalBeat);
            //nx.onload(finalBeat1);
            //nx.onload(finalBeat2);
        }

        //var x = cb();
        //console.log(showBeats(x));

        rs.pipe(getLine1).pipe(ws)*/



        nx.onload = function() {


            /* Event listening  options */

            /*
             This is the default anyway!
             */
            nx.sendsTo("js"); /*what exactly does this do?


            /*

             Receives grouped output from dial when anything changes.
             'data' here will be a js object.

             keyboard1.on('*', function(data){
             console.log(data);
             });

             */

            /*

             Receives only the data of slider #2 (third from left)
             Executes ONLY when slider #2 is changed
             This is equivalent to listening for /multislider1/2 in OSC

             multislider1.on('2', function(data){
             console.log(data);
             });

             */

            /*
             this code can be useful for logging any interface events
             */


            /*for (var key in nx.widgets) {
             with (nx.widgets[key]) {
             on('*', function(data) {
             // code that will be executed
             console.log(canvasID, data)

             })
             }
             }*/




            /* styles */
            console.log(beatInformation);

            var finalBeat1 = beatInformation;

            nx.colorize("accent", "#347");
            nx.colorize("border", "#e4e4e4");
            nx.colorize("fill", "#eee");

            var sliderValue = slider1.set({
                value: finalBeat1
            }, true)

            console.log(sliderValue);

            slider1.on('*', function(data) { //what does the * represent???
                finalBeat1.value = data.value;
                console.log(finalBeat1.value);
            })

            /*slider2.on('*', function(data) {
             finalBeat1.value = data.value/5;
             console.log(finalBeat1.value);
             })

             slider3.on('*', function(data) {
             finalBeat2.value = data.value/5;
             console.log(finalBeat2.value);
             })*/

            /* matrix settings

             //a widget can be accessed with its name
             matrix1.row = 6;

             //or as a property of nx.nxObjects
             nx.nxObjects["matrix1"].col = 6;

             matrix1.init();

             matrix1.sequence(400);
             matrix1.jumpTo({row:1,col:2});
             matrix1.sequenceMode = "linear"; // default. you can also use 'random'
             */

            /*slider
             <canvas nx="slider"></canvas>
             id="slider2"></canvas>
             slider
             <canvas nx="slider"></canvas>
             id="slider3"></canvas>*/
        }

    </script>
</head>

<body>

<style>
    canvas {display:block; margin:0px 0px 50px}
    body {color:#bbb;font-family:gill sans;font-size:14pt;}
</style>

slider
<canvas nx="slider" min= "0" max= "10" id = "slider1"></canvas>

-->
</body>

</html>